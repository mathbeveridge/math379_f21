<?xml version="1.0" encoding="UTF-8" ?>



<chapter xml:id="perm-euler-recur" xmlns:xi="http://www.w3.org/2001/XInclude">
	<title>Recurrences for Eulerian Numbers</title>
	<introduction>
		<p>


	</p>
	</introduction>
	<exercises>
		<title>Practice Problems</title>
		<exercise>
			<statement>
				<p>
 In this problem you will prove the recurrence
<me>
A(n,k) = k \, A(n-1,k) + (n-k+1) A(n-1, k-1)
</me>
As you might suspect, we will "treat element <m>n</m> as special." Let  <m>\cA(n,k)</m>  denote the set of <m>n</m>-permutations with <m>k</m> ascending runs (and therefore with <m>k-1</m> descents). <em>Pro Tip #1:</em> only positions <m>1 \leq j \leq n-1</m> are considered as ascents/descents. Position <m>n</m> is handled exceptionally. <em>Pro Tip #2: </em> Be ready to think about having <m>k</m> ascending runs, or <m>k-1</m> descents, whichever is easiest!

			<ol>
				<li>
					<p>
 As a warm-up, let's consider <m>n=4</m> and <m>k=3</m>, so that the recurrence becomes
<m></m> A(4,3) = 3 A(3,3) + 2 A(3,2).<m></m> We list the 11 different permutations in  <m>\cA(4,3)</m> and all 6=3! permutations in <m>S_3</m>. Draw a line from the 4-permutation to the 3-permutation we obtain by deleting element 4.





<me>
\begin{array}{ccccccccccc}
1432 &amp; 2143 &amp; 2431 &amp; 3142 &amp; 3214 &amp; 3241 &amp; 3421 &amp; 4132 &amp; 4213 &amp; 4231 &amp; 4312
\end{array}
</me>
<me>
\begin{array}{ccccccccccc}
123 &amp; 132 &amp; 213 &amp; 231 &amp; 312 &amp; 321 \\
\end{array}
</me>


					</p>
				</li>
				<li>
					<p>
 In part (a), you only mapped to permutations in <m>\cA(3,2)</m> and <m>\cA(3,3)</m>.  Now work backwards. Given a permutation in <m>\cA(3,2)</m>, where can you place element 4 to create a permutation in <m>\cA(4,3)</m>? Now, how about when you start with a permutation in <m>\cA(3,3)</m>? Write down your observations.


					</p>
				</li>
				<li>
					<p>
 Now we start our proof for <m>A(n,k)</m>. Given a permutation <m>p \in \cA(n,k)</m>. Let <m>p' \in S_{n-1}</m> be the permutation obtained by removing element <m>n</m>. Explain why either <m>p' \in \cA(n-1, k)</m> or <m>p' \in \cA(n-1,k-1)</m>.


					</p>
				</li>
				<li>
					<p>
 Fixing <m>p'=p_1 p_2 \cdots p_{n-1} \in \cA(n-1,k)</m>, can we obtain an element of <m>\cA(n,k)</m> by placing element <m>n</m>...
		<ul>
			<li>
			<p>
 Before <m>p_1</m>?

			</p>
			</li>
			<li>
			<p>
 After <m>p_{n-1}</m>?

			</p>
			</li>
			<li>
			<p>
 Directly after a descent of <m>p'</m>?

			</p>
			</li>
			<li>
			<p>
 Directly after an ascent of <m>p'</m>?

			</p>
			</li>
		</ul>
In conclusion, how many different options do you have for inserting element <m>n</m>?




					</p>
				</li>
				<li>
					<p>
 Fixing <m>p'=p_1 p_2 \cdots p_{n-1} \in \cA(n-1,k-1)</m>, can we obtain an element of <m>\cA(n,k)</m> by placing element <m>n</m>...
		<ul>
			<li>
			<p>
 Before <m>p_1</m>?

			</p>
			</li>
			<li>
			<p>
 After <m>p_{n-1}</m>?

			</p>
			</li>
			<li>
			<p>
 Directly after a descent of <m>p'</m>?

			</p>
			</li>
			<li>
			<p>
 Directly after an ascent of <m>p'</m>?

			</p>
			</li>
		</ul>
In conclusion, how many different options do you have for inserting element <m>n</m>? <em>Pro Tip #3:</em> Remember that you are starting with <m>p' \in  \cA(n-1,k-1)</m>, so there are <m>n-2</m> total ascents/descents.


					</p>
				</li>
				<li>
					<p>
 Put together your answers from parts (d) and (e) to prove that <m></m>A(n,k) = k \, A(n-1,k) + (n-k+1) A(n-1, k-1).<m></m>


					</p>
				</li>
			</ol>

				</p>
			</statement>
		</exercise>
		<exercise>
			<statement>
				<p>
 In this problem, you will prove the symmetry that  we observed in the Eulerian triangle:
<me>
A(n,k) = A(n, n-k+1).
</me>
Let <m>p = p_1 p_2 \cdots p_n \in \cA(n,k),</m> so that <m>p</m> has <m>k-1</m> descents among <m>p_1, p_2, \ldots p_{n-1}</m>. Consider its reverse <m>\overline{p} = p_n p_{n-1} \cdots p_1</m>. By <em>tracking descents</em> (not ascending runs), explain why
		<ul>
			<li>
			<p>
 <m>\overline{p} \in \cA(n,n-k+1)</m>, and
			</p>
			</li>
			<li>
			<p>
 the mapping <m>p \rightarrow \overline{p}</m> is a bijection from <m>\cA(n,k)</m> to <m>\cA(n,n-k+1)</m>.
			</p>
			</li>
		</ul>
<em>Pro Tip #4:</em> The reversal mapping <m>p \rightarrow \overline{p}</m> is a <em>very useful tool</em> for investigating the structure of permutations.


				</p>
			</statement>
		</exercise>
	</exercises>



</chapter>
